
#include <SN8F5708.H>
#include "stdio.h"
#include "EC11.h"
#define shichang 2
#define uint8_t unsigned char
#define uint16_t unsigned int
sbit abmqa = P4 ^ 3;
sbit abmqb = P4 ^ 4;

uint8_t diyici, dierci, disanci; //????,????,????
uint8_t adiyici, adierci, adisanci;
uint8_t buzhou, abuzhou; //?????????????
char chufa, achufa;      //??

void v_bmq(void)
{
   uint8_t aa;
   if (abmqa && abmqb)
      abuzhou = 0; //????,?????????????????
   else
   {                                          //????
      aa = (abmqa ? 1 : 0) + (abmqb ? 2 : 0); //??????????a
      if (abuzhou == 0)
         adiyici = aa, abuzhou = 1; //???A??????????IO??????????
      else if (abuzhou == 1)        //?????1
      {
         if (aa != adiyici) //??????????
         {
            adierci = aa; //???????????????
            abuzhou = 2;  //???????
         }
      }
      else if (abuzhou == 2) //??,????????
      {
         if (aa != adierci) //??a??????
         {
            adisanci = aa; //?????????
            if (adiyici == 1 && adierci == 0 && adisanci == 2)
               achufa = 1; //??????????????,??1??
            if (adiyici == 2 && adierci == 0 && adisanci == 1)
               achufa = 2; //??,??2??
            abuzhou = 0;   //????
         }
      }
   }
}


ec11_ve(void) // µçÑ¹ÐýÅ¥
{
   v_bmq();
   if (achufa == 1) //????1??
   {
      achufa = 0; //????,??????
      return 'Z';
   } // A??
   if (achufa == 2)
   { //??
      achufa = 0;
      return 'Y';
   }
   return (0);
}

